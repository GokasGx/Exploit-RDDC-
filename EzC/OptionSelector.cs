using System;
using System.Collections.Generic;
using static System.Console;
namespace EzC
{
    public class OptionSelector
    {
        public string Description;
        public List<string> Options = new List<string>();
        public OptionSelector(string[] options, string desc = "")
        {
            for (int i = 0; i < options.Length; i++)
                Options.Add(options[i]);
            Description = desc;
        }
        public void AddOptions(string[] options, string desc = "", bool removePrevious = true)
        {
            if (desc == "")
                desc = Description;
            else
                Description = desc;
            if (removePrevious)
                Options.Clear();
            for (int i = 0; i < options.Length; i++)
                Options.Add(options[i]);
        }
        public string Select()
        {
            int selectedIndex = 0;
            while (true)
            {
                Draw(selectedIndex);
                switch (ReadKey().Key)
                {
                    case ConsoleKey.W:
                    case ConsoleKey.UpArrow:
                        selectedIndex--;
                        if (selectedIndex < 0)
                            selectedIndex = Options.Count - 1;
                        break;
                    case ConsoleKey.S:
                    case ConsoleKey.DownArrow:
                        selectedIndex++;
                        if (selectedIndex > Options.Count - 1)
                            selectedIndex = 0;
                        break;
                    case ConsoleKey.Enter:
                    case ConsoleKey.D:
                    case ConsoleKey.RightArrow:
                        Draw(selectedIndex);
                        return Options[selectedIndex];
                }
            }
        }
        private void Draw(int currentIndex)
        {
            Clear();
            WriteLine(Description);
            for (int i = 0; i < Options.Count; i++)
            {
                Write("[");
                ForegroundColor = ConsoleColor.Green;
                Write( (i == currentIndex ? "*":" ") );
                ForegroundColor = ConsoleColor.White;
                WriteLine("] " + Options[i]);
            }
        }
    }
}